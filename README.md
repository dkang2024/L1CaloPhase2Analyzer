# Phase 2 L1 Calo Analyzer

## Description

   Adapted from: https://github.com/skkwan/phase2-l1Calo-analyzer
   This repo is for running the Phase-2 calo emulator.

## Setup (do only once)

   git clone git@github.com:pallabidas/L1CaloPhase2Analyzer.git

## To run the emulator and create an n-tuple for the event display

   To call the firmware-based emulator and make an n-tuple:
   ```
   cmsenv
   cmsRun test-l1tEventDisplayGenerator.py   
   ```
   Creates these outputs: 
    * `L1EventDisplay.root` (`L1EventDisplay-cmssw.root`) - this should be used in the event display code
    * `.txt` printouts specified in the `L1Trigger/L1CaloTrigger` plugins scripts) - helpful for info/debugging
    * `phase2L1CaloEGamma.root` (`cmsswCaloEGamma.root`): the outputs generated by the `L1Trigger/L1CaloTrigger` plugins scripts) - can ignore

   Use the `L1EventDisplay` ROOT files as input inside `figures/eventDisplays/plotEventDisplayPhaseIIPFclusters.C`
   Get plots by running `./makedisplay.sh` after suitably changing save location.

## To run the emulator and create a TTree for distributions, efficiencies, etc.

   ```
   cmsenv
   cmsRun test-analyzer.py
   ```
   This produces `analyzer.root`.
   Use this file as input in `figures/efficiencyPlots/makeEfficienciesPlotPF.cpp`.

